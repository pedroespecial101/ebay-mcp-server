2025-06-03 13:33:46,197 - __main__ - INFO - Logging configured with level DEBUG (DEBUG)
2025-06-03 13:33:46,197 - __main__ - INFO - Log file location: /Users/petetreadaway/Projects/ebay-mcp-server/logs/fastmcp_server.log
2025-06-03 13:33:46,448 - ebay_service - INFO - Attempting to load .env from: /Users/petetreadaway/Projects/ebay-mcp-server/src/../.env
2025-06-03 13:33:46,448 - ebay_service - INFO - .env file loaded successfully.
2025-06-03 13:33:46,452 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Auth API'
2025-06-03 13:33:46,452 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,452 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,452 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,452 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,453 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,453 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,453 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Browse API'
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,458 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,464 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Taxonomy API'
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,465 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,472 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Inventory API'
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,473 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,473 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Test Tools API'
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,477 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Database Tools API'
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,482 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay API'
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:46,484 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:46,484 - __main__ - INFO - Mounting all sub-servers
2025-06-03 13:33:46,484 - __main__ - INFO - Mounted auth MCP server
2025-06-03 13:33:46,484 - __main__ - INFO - Mounted browse API MCP server
2025-06-03 13:33:46,484 - __main__ - INFO - Mounted taxonomy API MCP server
2025-06-03 13:33:46,484 - __main__ - INFO - Mounted inventory API MCP server
2025-06-03 13:33:46,485 - __main__ - INFO - Mounted tests MCP server
2025-06-03 13:33:46,485 - __main__ - INFO - Mounted database MCP server
2025-06-03 13:33:46,485 - __main__ - INFO - All sub-servers mounted successfully
2025-06-03 13:33:46,485 - __main__ - INFO - Starting FastMCP server with stdio transport...
2025-06-03 13:33:46,485 - __main__ - INFO - Server is configured with dynamically mounted sub-servers
2025-06-03 13:33:46,485 - FastMCP.fastmcp.server.server - INFO - Starting server "eBay API"...
2025-06-03 13:33:46,489 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 13:33:46,491 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2025-06-03 13:33:46,492 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x1050eec10>
2025-06-03 13:33:46,492 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-06-03 13:33:46,492 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-06-03 13:33:46,492 - ebay_mcp.auth.server - INFO - Executing trigger_ebay_login MCP tool.
2025-06-03 13:33:46,493 - root - INFO - Initiating eBay user login process...
2025-06-03 13:33:46,493 - root - INFO - Generated scope string: 'https://api.ebay.com/oauth/api_scope https://api.ebay.com/oauth/api_scope/sell.inventory https://api.ebay.com/oauth/api_scope/commerce.identity.readonly'
2025-06-03 13:33:46,493 - root - INFO - Opening browser to: https://auth.ebay.com/oauth2/authorize with query params...
2025-06-03 13:33:46,757 - root - INFO - Waiting for authorization response from local server...
2025-06-03 13:33:46,758 - root - INFO - Local HTTP server started on port 9292, listening on all available interfaces (reuse_address enabled).
2025-06-03 13:33:46,758 - root - INFO - Waiting for eBay to redirect to your configured RuName (which should forward to a local address on port 9292 at path /oauth/callback)...
2025-06-03 13:33:53,889 - root - INFO - Authorization code received by local server: v^1.1#i^1#...
2025-06-03 13:33:53,890 - root - INFO - Shutting down local HTTP server...
2025-06-03 13:33:53,890 - root - INFO - Local HTTP server stopped.
2025-06-03 13:33:53,890 - root - INFO - Exchanging authorization code for token: v^1.1#i^1#...
2025-06-03 13:33:53,902 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.ebay.com:443
2025-06-03 13:33:54,278 - urllib3.connectionpool - DEBUG - https://api.ebay.com:443 "POST /identity/v1/oauth2/token HTTP/1.1" 200 2697
2025-06-03 13:33:54,279 - root - INFO - Access token received: v^1.1#i^1#...
2025-06-03 13:33:54,279 - root - INFO - Refresh token received: v^1.1#i^1#...
2025-06-03 13:33:54,279 - root - INFO - Attempting to fetch eBay user details...
2025-06-03 13:33:54,279 - root - INFO - Using access token for user details: v^1.1#i^1#...
2025-06-03 13:33:54,281 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): apiz.ebay.com:443
2025-06-03 13:33:54,647 - urllib3.connectionpool - DEBUG - https://apiz.ebay.com:443 "GET /commerce/identity/v1/user/ HTTP/1.1" 200 115
2025-06-03 13:33:54,649 - root - INFO - Fetched user details: UserID=9h3xD5OhS9y, UserName=treadersloft
2025-06-03 13:33:54,652 - root - INFO - Successfully fetched tokens and user details: UserID=9h3xD5OhS9y, UserName=treadersloft, AccessToken=v^1.1#i^1#..., RefreshToken=v^1.1#i^1#...
2025-06-03 13:33:54,658 - root - INFO - set_key reported SUCCESS for EBAY_USER_ACCESS_TOKEN. Value (truncated): v^1.1#i^1#p^3#f...
2025-06-03 13:33:54,660 - root - INFO - set_key reported SUCCESS for EBAY_USER_ID. Value (truncated): 9h3xD5OhS9y...
2025-06-03 13:33:54,661 - root - INFO - set_key reported SUCCESS for EBAY_USER_NAME. Value (truncated): treadersloft...
2025-06-03 13:33:54,663 - root - INFO - set_key reported SUCCESS for EBAY_USER_REFRESH_TOKEN. Value (truncated): v^1.1#i^1#p^3#I...
2025-06-03 13:33:54,665 - root - INFO - All user credentials saved to .env successfully.
2025-06-03 13:33:54,666 - root - INFO - Successfully obtained tokens and user details: Tokens and user details obtained.
2025-06-03 13:33:54,667 - ebay_mcp.auth.server - INFO - trigger_ebay_login: eBay login process completed successfully according to initiate_user_login.
2025-06-03 13:33:54,668 - mcp.server.lowlevel.server - DEBUG - Response sent
