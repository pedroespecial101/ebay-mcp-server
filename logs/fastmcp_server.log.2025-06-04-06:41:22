2025-06-03 19:13:02,445 - __main__ - INFO - Logging configured with level DEBUG (DEBUG)
2025-06-03 19:13:02,445 - __main__ - INFO - Log file location: /Users/petetreadaway/Projects/ebay-mcp-server/logs/fastmcp_server.log
2025-06-03 19:13:02,770 - ebay_service - INFO - Attempting to load .env from: /Users/petetreadaway/Projects/ebay-mcp-server/src/../.env
2025-06-03 19:13:02,771 - ebay_service - INFO - .env file loaded successfully.
2025-06-03 19:13:02,775 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Auth API'
2025-06-03 19:13:02,775 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,775 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,776 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,776 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,776 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,776 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,776 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Browse API'
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,783 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Taxonomy API'
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,790 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,803 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Inventory API'
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,804 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,804 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Test Tools API'
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,811 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Database Tools API'
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,814 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay API'
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 19:13:02,817 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 19:13:02,817 - __main__ - INFO - Mounting all sub-servers
2025-06-03 19:13:02,817 - __main__ - INFO - Mounted auth MCP server
2025-06-03 19:13:02,817 - __main__ - INFO - Mounted browse API MCP server
2025-06-03 19:13:02,817 - __main__ - INFO - Mounted taxonomy API MCP server
2025-06-03 19:13:02,817 - __main__ - INFO - Mounted inventory API MCP server
2025-06-03 19:13:02,817 - __main__ - INFO - Mounted tests MCP server
2025-06-03 19:13:02,817 - __main__ - INFO - Mounted database MCP server
2025-06-03 19:13:02,817 - __main__ - INFO - All sub-servers mounted successfully
2025-06-03 19:13:02,817 - __main__ - INFO - Starting FastMCP server with stdio transport...
2025-06-03 19:13:02,817 - __main__ - INFO - Server is configured with dynamically mounted sub-servers
2025-06-03 19:13:02,817 - FastMCP.fastmcp.server.server - INFO - Starting server "eBay API"...
2025-06-03 19:13:02,822 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 19:13:02,825 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2025-06-03 19:13:02,825 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x1082dec10>
2025-06-03 19:13:02,825 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-06-03 19:13:02,825 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-06-03 19:13:02,825 - ebay_mcp.browse.server - INFO - Executing search_ebay_items MCP tool with query='396604237915', limit=10.
2025-06-03 19:13:02,854 - ebay_service - INFO - Attempting to retrieve EBAY_USER_ACCESS_TOKEN from .env via ebay_auth module.
2025-06-03 19:13:02,855 - ebay_service - INFO - Successfully retrieved EBAY_USER_ACCESS_TOKEN.
2025-06-03 19:13:02,855 - ebay_service - DEBUG - get_ebay_access_token: EBAY_USER_ACCESS_TOKEN (first 10 chars): v^1.1#i^1#...
2025-06-03 19:13:02,855 - utils.api_utils - INFO - search_ebay_items: Attempting API call with current token: v^1.1#i^1#...
2025-06-03 19:13:02,855 - utils.api_utils - DEBUG - search_ebay_items: Executing API call with full token: v^1.1#i^1#f^0#p^3#r^0#I^3#t^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
2025-06-03 19:13:02,855 - ebay_mcp.browse.server - DEBUG - search_ebay_items: Requesting URL: https://api.ebay.com/buy/browse/v1/item_summary/search with params: {'q': '396604237915', 'limit': 10} using token v^1.1#i^1#...
2025-06-03 19:13:02,856 - httpcore.connection - DEBUG - connect_tcp.started host='api.ebay.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-06-03 19:13:03,015 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1087897f0>
2025-06-03 19:13:03,015 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108780560> server_hostname='api.ebay.com' timeout=5.0
2025-06-03 19:13:03,050 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1086f9310>
2025-06-03 19:13:03,051 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-03 19:13:03,051 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-03 19:13:03,051 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-03 19:13:03,051 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-03 19:13:03,051 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-03 19:13:03,265 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'rlogid', b't6p%60gu%60mgwjfiiw%3F%3Ctfdtdkdvn%60jhs.3e%3E%3B0e2ef%3E*7%3C%7E2%7B-19736ff3083-0x2329'), (b'x-content-type-options', b'nosniff'), (b'x-xss-protection', b'0'), (b'x-frame-options', b'DENY'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'x-envoy-upstream-service-time', b'6'), (b'Server', b'ebay-proxy-server'), (b'x-ebay-pop-id', b'UFES2-RNOAZ03-api'), (b'Expires', b'Tue, 03 Jun 2025 18:13:03 GMT'), (b'Cache-Control', b'max-age=0, no-cache, no-store'), (b'Pragma', b'no-cache'), (b'Date', b'Tue, 03 Jun 2025 18:13:03 GMT'), (b'Connection', b'keep-alive'), (b'x-CDN', b'Akamai'), (b'Strict-Transport-Security', b'max-age=31536000')])
2025-06-03 19:13:03,266 - httpx - INFO - HTTP Request: GET https://api.ebay.com/buy/browse/v1/item_summary/search?q=396604237915&limit=10 "HTTP/1.1 401 Unauthorized"
2025-06-03 19:13:03,267 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-03 19:13:03,267 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-03 19:13:03,267 - httpcore.http11 - DEBUG - response_closed.started
2025-06-03 19:13:03,267 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-03 19:13:03,268 - ebay_mcp.browse.server - DEBUG - search_ebay_items: Response status: 401
2025-06-03 19:13:03,268 - utils.api_utils - DEBUG - search_ebay_items: Exception in API call: Client error '401 Unauthorized' for url 'https://api.ebay.com/buy/browse/v1/item_summary/search?q=396604237915&limit=10'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-06-03 19:13:03,268 - utils.api_utils - DEBUG - search_ebay_items Request: {
  "method": "GET",
  "url": "https://api.ebay.com/buy/browse/v1/item_summary/search?q=396604237915&limit=10",
  "headers": {
    "host": "api.ebay.com",
    "accept": "*/*",
    "accept-encoding": "gzip, deflate",
    "connection": "keep-alive",
    "user-agent": "python-httpx/0.28.1",
    "authorization": "Bearer v^1.1#i^1#f^0#p^3#r^0#I^3#t^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",
    "content-type": "application/json"
  },
  "content": null
}
2025-06-03 19:13:03,269 - utils.api_utils - DEBUG - search_ebay_items Response: {
  "status_code": 401,
  "headers": {
    "rlogid": "t6p%60gu%60mgwjfiiw%3F%3Ctfdtdkdvn%60jhs.3e%3E%3B0e2ef%3E*7%3C%7E2%7B-19736ff3083-0x2329",
    "x-content-type-options": "nosniff",
    "x-xss-protection": "0",
    "x-frame-options": "DENY",
    "content-type": "application/json",
    "content-length": "254",
    "x-envoy-upstream-service-time": "6",
    "server": "ebay-proxy-server",
    "x-ebay-pop-id": "UFES2-RNOAZ03-api",
    "expires": "Tue, 03 Jun 2025 18:13:03 GMT",
    "cache-control": "max-age=0, no-cache, no-store",
    "pragma": "no-cache",
    "date": "Tue, 03 Jun 2025 18:13:03 GMT",
    "connection": "keep-alive",
    "x-cdn": "Akamai",
    "strict-transport-security": "max-age=31536000"
  },
  "content": "{\n  \"errors\": [\n    {\n      \"errorId\": 1001,\n      \"domain\": \"OAuth\",\n      \"category\": \"REQUEST\",\n      \"message\": \"Invalid access token\",\n      \"longMessage\": \"Invalid access token. Check the value of the Authorization HTTP request header.\"\n    }\n  ]\n}"
}
2025-06-03 19:13:03,269 - utils.api_utils - DEBUG - search_ebay_items Request: {
  "method": "GET",
  "url": "https://api.ebay.com/buy/browse/v1/item_summary/search?q=396604237915&limit=10",
  "headers": {
    "host": "api.ebay.com",
    "accept": "*/*",
    "accept-encoding": "gzip, deflate",
    "connection": "keep-alive",
    "user-agent": "python-httpx/0.28.1",
    "authorization": "Bearer v^1.1#i^1#f^0#p^3#r^0#I^3#t^H4sIAAAAAAAA/+VZbYwbRxk+310CUZtWKaWtAhR3W2jVY+3ZL3t3lXOyZ+/lrNg+n+3L9a5E1uzurL259a61O3t3DlA5CY2IqqL+aAGpDQ0CBDoQSC2hRKBEAvHRAioUpIDaCiECAgriQ5QgUCm7vsvFuYgkZK+wEv5jzcw7M+/zvB/z7gzobt5y75GJI+e2xt40eLwLuoOxGHUd2LJ508gNQ4PbNw2APoHY8e5d3eFDQ7/e4cKW2RYryG3bloviSy3TcsVe5yjhOZZoQ9dwRQu2kCtiVaxKxYJIJ4DYdmxsq7ZJxPO5UYLhGJ1iNE3jWIYHdMrvtc6vWbNHCZpNQ1qFXJqlGQppij/uuh7KWy6GFvbHAc2RIEUCpkbRIiOIrJDgADNHxPcixzVsyxdJACLTU1fszXX6dL28qtB1kYP9RYhMXhqvTkr5nFyq7Uj2rZVZ5aGKIfbci1tZW0PxvdD00OW3cXvSYtVTVeS6RDKzssPFi4rSeWWuQf0e1byi0GlA+0ymIRLY9IZQOW47LYgvr0fQY2ik3hMVkYUN3LkSoz4byn6k4tVWyV8in4sHf1MeNA3dQM4oIY9Js9NVuULEq+WyYy8YGtICpBRL0xzP0CmOyGAHQc3X37R1vLrPymKrLK/bKGtbmhFw5sZLNh5DvtJoPTV0HzW+0KQ16Ug6DhTql2NXKWQFYS6w6YoRPdy0ArOils9DvNe8sgHOe8QFH9gonxBYwKR5jQdcmqFpmr3UJ4JY/8/9IhOYRiqXk4EuSIEdsgWdeYTbJlQRqfr0ei3kGJrIcDrN8DoitZSgk6yg66TCaSmS0hECCCmKKvD/R+6BsWMoHkZrLrJ+oIdxlKiqdhuVbdNQO8R6kV7GWXWIJXeUaGLcFpPJxcXFxCKTsJ1GkgaASt5XLFTVJmpBYk3WuLIwafRcQ0X+LNcQcafta7Pke56/udUgMoyjlaGDO1Vkmn7Heb+9SLfM+t5/AzJrGj4DNX+LaGGcsF2MtFDQNLRgqKhuaJFCFsR6xo8NINBp/8T1p4YCadoNwyoi3LSjBTMTJIV8LhQ2P4dCHC1UfdkFcKtZiGVpEqRFAEKBhQ0H9bLRSkESLdhSNiuXa3I4c0rtdr7V8jBUTJSPmLey6VSaYTfGgPJq8bXDDWI9OhiDo7qenSwW5UpWrk/vqRdq4Qza9ryIJdeM0GSWctxksyp0QkELyinRgLqI7XlkRe94rMjjFbk6Ua9N7pFLoZBWkO4gt1kLcEYtKqUpaY/k/4pFOGWXS4oyNuZp2t7pmlBs1pawTi3QDanQzDnqTAFNFhpzswtgolPIp+6DUya1OKaMSC2JyVK5xuhoKJKqSHXQ5Y+iINb/6wSllLTA01nD2w3yZmV+yhFm3LEmADl5qcxzOFmw8jMj05SAZuRwBBQbUYv0jSuhatEMcWclMOu9DFT3W6FAyo3I5WqG0lIUlRYoIQ0gVCjIaxqlc/7nqa6rPBRCFxtvGN4g1q8NcxlhVPM/h8kSWqxCE0lkuZIjEYV4DiEekgJUBQ3y4UrJduRMvVHH8lqNFTSjBbEszRblUq1K10E9+PapS7srsly8cPN2bYjd4BIiWkiD+a6/AGwbiaBOSqh2K2lDDzeDrnpP4/jVCCVdZJoJw1rwDWo7naub4/e1kKOihKGt3HImgtsl2zLDeZZmtwzVMC+lOoj1/yndu8fCfUQjzXCQiuueY0TLj4JcWA+SoQYXYYdclxrJJXXe3B8uW/ieE8WrkfF8brJelqrVPfJsNRTCHFqIWs3OMyzHqIJKKhzgSJanUiQEQorkKYrlOVZnIOBCYX4D74SGD37y2kBTaZYXgtc1/mqhrevou4u+5BUiefErYGag96MOxb4ODsVODcZiYAd4F3UnuGPz0PTw0PXbXQP72RHqCddoWBB7DkrMo04bGs7gWwaev6GgHZwovNpVvGdm/rKTH9ja9wh5fB+4be0ZcssQdV3fmyR4+4WRTdSNt2716+8UYCiaEVhhDtx5YXSYumX45g+++OKWk0XzbQcqSmr5ph+qI48XxsHWNaFYbNPA8KHYwOJX4u/488mnj559rPD57X/SExNPGfcfe33fz4lf1G7CTyyDw8/99fsHnG+8M/ab7gM/unlz6r0nl197/VMH7nrp40dhade533vztzzz4W+fPLVM/67wx7lH3r3r8FtPnX5hgXzoZe75B439nv3g+3Nf/NUj2+ZevbstHXxSaN220z4z9ePu6bOlU9yXb/3Mcz89fOTsK8f/5nVeWH7sHw/lKt/65Zk7Hv178/ZHE3+oPnv/U8SRWurE0dLLCzPb3/fkd/dN7/zna7/9zhd+cv1L77nnbrRXPvPV2R8cO/fN/IfuaX5NGz/2kcy2V362/94PPP2xbV/Sb7+xPQInnj17JnVurNQttFPxzz780dTphTcv7/oe/+lPbPvcicwDJ1Zs+S8LZP5rHh4AAA==",
    "content-type": "application/json"
  },
  "content": null
}
2025-06-03 19:13:03,269 - utils.api_utils - DEBUG - search_ebay_items Response: {
  "status_code": 401,
  "headers": {
    "rlogid": "t6p%60gu%60mgwjfiiw%3F%3Ctfdtdkdvn%60jhs.3e%3E%3B0e2ef%3E*7%3C%7E2%7B-19736ff3083-0x2329",
    "x-content-type-options": "nosniff",
    "x-xss-protection": "0",
    "x-frame-options": "DENY",
    "content-type": "application/json",
    "content-length": "254",
    "x-envoy-upstream-service-time": "6",
    "server": "ebay-proxy-server",
    "x-ebay-pop-id": "UFES2-RNOAZ03-api",
    "expires": "Tue, 03 Jun 2025 18:13:03 GMT",
    "cache-control": "max-age=0, no-cache, no-store",
    "pragma": "no-cache",
    "date": "Tue, 03 Jun 2025 18:13:03 GMT",
    "connection": "keep-alive",
    "x-cdn": "Akamai",
    "strict-transport-security": "max-age=31536000"
  },
  "content": "{\n  \"errors\": [\n    {\n      \"errorId\": 1001,\n      \"domain\": \"OAuth\",\n      \"category\": \"REQUEST\",\n      \"message\": \"Invalid access token\",\n      \"longMessage\": \"Invalid access token. Check the value of the Authorization HTTP request header.\"\n    }\n  ]\n}"
}
2025-06-03 19:13:03,269 - utils.api_utils - DEBUG - search_ebay_items Error: HTTP Status Error: Client error '401 Unauthorized' for url 'https://api.ebay.com/buy/browse/v1/item_summary/search?q=396604237915&limit=10'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-06-03 19:13:03,269 - utils.api_utils - WARNING - search_ebay_items: API call failed with 401 (Unauthorized). Token v^1.1#i^1#... may be expired. Attempting refresh.
2025-06-03 19:13:03,270 - root - INFO - Attempting to refresh eBay access token...
2025-06-03 19:13:03,270 - root - INFO - Requesting new access token from https://api.ebay.com/identity/v1/oauth2/token using refresh token: v^1.1#i^1#...
2025-06-03 19:13:03,275 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.ebay.com:443
2025-06-03 19:13:03,626 - urllib3.connectionpool - DEBUG - https://api.ebay.com:443 "POST /identity/v1/oauth2/token HTTP/1.1" 200 2542
2025-06-03 19:13:03,627 - root - INFO - Successfully refreshed access token: v^1.1#i^1#...
2025-06-03 19:13:03,627 - root - INFO - Refresh token was not re-issued during this refresh cycle.
2025-06-03 19:13:03,631 - root - INFO - set_key reported SUCCESS for EBAY_USER_ACCESS_TOKEN. Value (truncated): v^1.1#i^1#p^3#r...
2025-06-03 19:13:03,636 - utils.api_utils - INFO - search_ebay_items: Token refresh process completed. New token value: v^1.1#i^1#... Attempting to retrieve and retry API call.
2025-06-03 19:13:03,636 - ebay_service - INFO - Attempting to retrieve EBAY_USER_ACCESS_TOKEN from .env via ebay_auth module.
2025-06-03 19:13:03,638 - ebay_service - INFO - Successfully retrieved EBAY_USER_ACCESS_TOKEN.
2025-06-03 19:13:03,638 - ebay_service - DEBUG - get_ebay_access_token: EBAY_USER_ACCESS_TOKEN (first 10 chars): v^1.1#i^1#...
2025-06-03 19:13:03,638 - utils.api_utils - INFO - search_ebay_items: Retrying API call with refreshed token: v^1.1#i^1#...
2025-06-03 19:13:03,638 - ebay_mcp.browse.server - DEBUG - search_ebay_items: Requesting URL: https://api.ebay.com/buy/browse/v1/item_summary/search with params: {'q': '396604237915', 'limit': 10} using token v^1.1#i^1#...
2025-06-03 19:13:03,639 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-03 19:13:03,640 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-03 19:13:03,640 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-03 19:13:03,640 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-03 19:13:03,640 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-03 19:13:04,049 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'rlogid', b't6p%60gu%60mgwjfiiw%3F%3Ctfdtdkdvn%60jhs.3e%3E%3B0e2ef%3E*%3Abdun-19736ff32b0-0x2341'), (b'x-ebay-svc-tracking-data', b'<a>bs=0&ul=en-US&serviceCorrelationId=01JWVFYCNMJD0K5STS54SM4TVF&uc=1&ciid=%2FzK0Ejc*&flgs=AA**</a>'), (b'x-content-type-options', b'nosniff'), (b'x-xss-protection', b'0'), (b'x-frame-options', b'DENY'), (b'Content-Type', b'application/json'), (b'Content-Length', b'130'), (b'x-envoy-upstream-service-time', b'235'), (b'Server', b'ebay-proxy-server'), (b'x-ebay-pop-id', b'UFES2-LVSAZ04-api'), (b'Expires', b'Tue, 03 Jun 2025 18:13:04 GMT'), (b'Cache-Control', b'max-age=0, no-cache, no-store'), (b'Pragma', b'no-cache'), (b'Date', b'Tue, 03 Jun 2025 18:13:04 GMT'), (b'Connection', b'keep-alive'), (b'x-CDN', b'Akamai'), (b'Strict-Transport-Security', b'max-age=31536000')])
2025-06-03 19:13:04,049 - httpx - INFO - HTTP Request: GET https://api.ebay.com/buy/browse/v1/item_summary/search?q=396604237915&limit=10 "HTTP/1.1 200 OK"
2025-06-03 19:13:04,050 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-03 19:13:04,050 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-03 19:13:04,050 - httpcore.http11 - DEBUG - response_closed.started
2025-06-03 19:13:04,050 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-03 19:13:04,051 - ebay_mcp.browse.server - DEBUG - search_ebay_items: Response status: 200
2025-06-03 19:13:04,051 - ebay_mcp.browse.server - INFO - search_ebay_items: Successfully fetched items.
2025-06-03 19:13:04,051 - ebay_mcp.browse.server - INFO - Parsed search results: 0 items found
2025-06-03 19:13:04,051 - httpcore.connection - DEBUG - close.started
2025-06-03 19:13:04,052 - httpcore.connection - DEBUG - close.complete
2025-06-03 19:13:04,053 - mcp.server.lowlevel.server - DEBUG - Response sent
