2025-06-03 13:33:20,100 - __main__ - INFO - Logging configured with level DEBUG (DEBUG)
2025-06-03 13:33:20,101 - __main__ - INFO - Log file location: /Users/petetreadaway/Projects/ebay-mcp-server/logs/fastmcp_server.log
2025-06-03 13:33:20,358 - ebay_service - INFO - Attempting to load .env from: /Users/petetreadaway/Projects/ebay-mcp-server/src/../.env
2025-06-03 13:33:20,359 - ebay_service - INFO - .env file loaded successfully.
2025-06-03 13:33:20,364 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Auth API'
2025-06-03 13:33:20,364 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,365 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,365 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,365 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,365 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,365 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,365 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Browse API'
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,370 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,371 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Taxonomy API'
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,377 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Inventory API'
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,385 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,385 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Test Tools API'
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,389 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Database Tools API'
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,394 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,396 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay API'
2025-06-03 13:33:20,396 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:33:20,397 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:33:20,397 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:33:20,397 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:33:20,397 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:33:20,397 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:33:20,397 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:33:20,397 - __main__ - INFO - Mounting all sub-servers
2025-06-03 13:33:20,397 - __main__ - INFO - Mounted auth MCP server
2025-06-03 13:33:20,397 - __main__ - INFO - Mounted browse API MCP server
2025-06-03 13:33:20,397 - __main__ - INFO - Mounted taxonomy API MCP server
2025-06-03 13:33:20,397 - __main__ - INFO - Mounted inventory API MCP server
2025-06-03 13:33:20,397 - __main__ - INFO - Mounted tests MCP server
2025-06-03 13:33:20,397 - __main__ - INFO - Mounted database MCP server
2025-06-03 13:33:20,397 - __main__ - INFO - All sub-servers mounted successfully
2025-06-03 13:33:20,397 - __main__ - INFO - Starting FastMCP server with stdio transport...
2025-06-03 13:33:20,397 - __main__ - INFO - Server is configured with dynamically mounted sub-servers
2025-06-03 13:33:20,397 - FastMCP.fastmcp.server.server - INFO - Starting server "eBay API"...
2025-06-03 13:33:20,401 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 13:33:20,404 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2025-06-03 13:33:20,404 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x10379ec10>
2025-06-03 13:33:20,404 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-06-03 13:33:20,404 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-06-03 13:33:20,404 - ebay_mcp.taxonomy.server - INFO - Executing get_category_suggestions MCP tool with query='trainers'.
2025-06-03 13:33:20,433 - ebay_service - INFO - Attempting to retrieve EBAY_USER_ACCESS_TOKEN from .env via ebay_auth module.
2025-06-03 13:33:20,434 - ebay_service - INFO - Successfully retrieved EBAY_USER_ACCESS_TOKEN.
2025-06-03 13:33:20,434 - ebay_service - DEBUG - get_ebay_access_token: EBAY_USER_ACCESS_TOKEN (first 10 chars): v^1.1#i^1#...
2025-06-03 13:33:20,434 - utils.api_utils - INFO - get_category_suggestions: Attempting API call with current token: v^1.1#i^1#...
2025-06-03 13:33:20,434 - utils.api_utils - DEBUG - get_category_suggestions: Executing API call with full token: v^1.1#i^1#p^3#f^0#I^3#r^0#t^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
2025-06-03 13:33:20,434 - ebay_mcp.taxonomy.server - DEBUG - get_category_suggestions: Requesting URL: https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions with params: {'q': 'trainers'} using token v^1.1#i^1#...
2025-06-03 13:33:20,434 - httpcore.connection - DEBUG - connect_tcp.started host='api.ebay.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-06-03 13:33:20,483 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1039196a0>
2025-06-03 13:33:20,483 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103853c80> server_hostname='api.ebay.com' timeout=5.0
2025-06-03 13:33:20,512 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1038a1310>
2025-06-03 13:33:20,512 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-03 13:33:20,512 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-03 13:33:20,512 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-03 13:33:20,512 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-03 13:33:20,512 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-03 13:33:20,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'rlogid', b't6w%7Dhjzdvn%60jhs9%3Fr%7Fmh%7Ffslehmq%2B240%3E%3Faa32%3A%28m%3Fdgb-19735c82d47-0x235a'), (b'x-content-type-options', b'nosniff'), (b'x-xss-protection', b'0'), (b'x-frame-options', b'DENY'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'x-envoy-upstream-service-time', b'54'), (b'Server', b'ebay-proxy-server'), (b'x-ebay-pop-id', b'UFES2-SLCAZ01-api'), (b'Expires', b'Tue, 03 Jun 2025 12:33:20 GMT'), (b'Cache-Control', b'max-age=0, no-cache, no-store'), (b'Pragma', b'no-cache'), (b'Date', b'Tue, 03 Jun 2025 12:33:20 GMT'), (b'Connection', b'keep-alive'), (b'x-CDN', b'Akamai'), (b'Strict-Transport-Security', b'max-age=31536000')])
2025-06-03 13:33:20,772 - httpx - INFO - HTTP Request: GET https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions?q=trainers "HTTP/1.1 401 Unauthorized"
2025-06-03 13:33:20,773 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-03 13:33:20,773 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-03 13:33:20,773 - httpcore.http11 - DEBUG - response_closed.started
2025-06-03 13:33:20,773 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-03 13:33:20,774 - ebay_mcp.taxonomy.server - DEBUG - get_category_suggestions: Response status: 401
2025-06-03 13:33:20,774 - utils.api_utils - DEBUG - get_category_suggestions: Exception in API call: Client error '401 Unauthorized' for url 'https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions?q=trainers'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-06-03 13:33:20,774 - utils.api_utils - DEBUG - get_category_suggestions Request: {
  "method": "GET",
  "url": "https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions?q=trainers",
  "headers": {
    "host": "api.ebay.com",
    "accept": "*/*",
    "accept-encoding": "gzip, deflate",
    "connection": "keep-alive",
    "user-agent": "python-httpx/0.28.1",
    "authorization": "Bearer v^1.1#i^1#p^3#f^0#I^3#r^0#t^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",
    "content-type": "application/json"
  },
  "content": null
}
2025-06-03 13:33:20,775 - utils.api_utils - DEBUG - get_category_suggestions Response: {
  "status_code": 401,
  "headers": {
    "rlogid": "t6w%7Dhjzdvn%60jhs9%3Fr%7Fmh%7Ffslehmq%2B240%3E%3Faa32%3A%28m%3Fdgb-19735c82d47-0x235a",
    "x-content-type-options": "nosniff",
    "x-xss-protection": "0",
    "x-frame-options": "DENY",
    "content-type": "application/json",
    "content-length": "254",
    "x-envoy-upstream-service-time": "54",
    "server": "ebay-proxy-server",
    "x-ebay-pop-id": "UFES2-SLCAZ01-api",
    "expires": "Tue, 03 Jun 2025 12:33:20 GMT",
    "cache-control": "max-age=0, no-cache, no-store",
    "pragma": "no-cache",
    "date": "Tue, 03 Jun 2025 12:33:20 GMT",
    "connection": "keep-alive",
    "x-cdn": "Akamai",
    "strict-transport-security": "max-age=31536000"
  },
  "content": "{\n  \"errors\": [\n    {\n      \"errorId\": 1001,\n      \"domain\": \"OAuth\",\n      \"category\": \"REQUEST\",\n      \"message\": \"Invalid access token\",\n      \"longMessage\": \"Invalid access token. Check the value of the Authorization HTTP request header.\"\n    }\n  ]\n}"
}
2025-06-03 13:33:20,775 - utils.api_utils - DEBUG - get_category_suggestions Request: {
  "method": "GET",
  "url": "https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions?q=trainers",
  "headers": {
    "host": "api.ebay.com",
    "accept": "*/*",
    "accept-encoding": "gzip, deflate",
    "connection": "keep-alive",
    "user-agent": "python-httpx/0.28.1",
    "authorization": "Bearer v^1.1#i^1#p^3#f^0#I^3#r^0#t^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",
    "content-type": "application/json"
  },
  "content": null
}
2025-06-03 13:33:20,776 - utils.api_utils - DEBUG - get_category_suggestions Response: {
  "status_code": 401,
  "headers": {
    "rlogid": "t6w%7Dhjzdvn%60jhs9%3Fr%7Fmh%7Ffslehmq%2B240%3E%3Faa32%3A%28m%3Fdgb-19735c82d47-0x235a",
    "x-content-type-options": "nosniff",
    "x-xss-protection": "0",
    "x-frame-options": "DENY",
    "content-type": "application/json",
    "content-length": "254",
    "x-envoy-upstream-service-time": "54",
    "server": "ebay-proxy-server",
    "x-ebay-pop-id": "UFES2-SLCAZ01-api",
    "expires": "Tue, 03 Jun 2025 12:33:20 GMT",
    "cache-control": "max-age=0, no-cache, no-store",
    "pragma": "no-cache",
    "date": "Tue, 03 Jun 2025 12:33:20 GMT",
    "connection": "keep-alive",
    "x-cdn": "Akamai",
    "strict-transport-security": "max-age=31536000"
  },
  "content": "{\n  \"errors\": [\n    {\n      \"errorId\": 1001,\n      \"domain\": \"OAuth\",\n      \"category\": \"REQUEST\",\n      \"message\": \"Invalid access token\",\n      \"longMessage\": \"Invalid access token. Check the value of the Authorization HTTP request header.\"\n    }\n  ]\n}"
}
2025-06-03 13:33:20,776 - utils.api_utils - DEBUG - get_category_suggestions Error: HTTP Status Error: Client error '401 Unauthorized' for url 'https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions?q=trainers'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-06-03 13:33:20,777 - utils.api_utils - WARNING - get_category_suggestions: API call failed with 401 (Unauthorized). Token v^1.1#i^1#... may be expired. Attempting refresh.
2025-06-03 13:33:20,777 - root - INFO - Attempting to refresh eBay access token...
2025-06-03 13:33:20,777 - root - INFO - Requesting new access token from https://api.ebay.com/identity/v1/oauth2/token using refresh token: v^1.1#i^1#...
2025-06-03 13:33:20,782 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.ebay.com:443
2025-06-03 13:33:21,159 - urllib3.connectionpool - DEBUG - https://api.ebay.com:443 "POST /identity/v1/oauth2/token HTTP/1.1" 200 2550
2025-06-03 13:33:21,159 - root - INFO - Successfully refreshed access token: v^1.1#i^1#...
2025-06-03 13:33:21,159 - root - INFO - Refresh token was not re-issued during this refresh cycle.
2025-06-03 13:33:21,164 - root - INFO - set_key reported SUCCESS for EBAY_USER_ACCESS_TOKEN. Value (truncated): v^1.1#i^1#r^0#p...
2025-06-03 13:33:21,167 - utils.api_utils - INFO - get_category_suggestions: Token refresh process completed. New token value: v^1.1#i^1#... Attempting to retrieve and retry API call.
2025-06-03 13:33:21,167 - ebay_service - INFO - Attempting to retrieve EBAY_USER_ACCESS_TOKEN from .env via ebay_auth module.
2025-06-03 13:33:21,169 - ebay_service - INFO - Successfully retrieved EBAY_USER_ACCESS_TOKEN.
2025-06-03 13:33:21,169 - ebay_service - DEBUG - get_ebay_access_token: EBAY_USER_ACCESS_TOKEN (first 10 chars): v^1.1#i^1#...
2025-06-03 13:33:21,169 - utils.api_utils - INFO - get_category_suggestions: Retrying API call with refreshed token: v^1.1#i^1#...
2025-06-03 13:33:21,170 - ebay_mcp.taxonomy.server - DEBUG - get_category_suggestions: Requesting URL: https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions with params: {'q': 'trainers'} using token v^1.1#i^1#...
2025-06-03 13:33:21,170 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-03 13:33:21,171 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-03 13:33:21,171 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-03 13:33:21,171 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-03 13:33:21,171 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-03 13:33:21,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'rlogid', b't6w%7Dhjzdvn%60jhs9%3Fr%7Fmh%7Ffslehmq%2B240%3E%3Faa32%3A%28ltwne-19735c82fca-0x2336'), (b'x-content-type-options', b'nosniff'), (b'x-xss-protection', b'0'), (b'x-frame-options', b'DENY'), (b'Vary', b'accept-encoding'), (b'Content-Encoding', b'gzip'), (b'Content-Type', b'application/json'), (b'x-envoy-upstream-service-time', b'108'), (b'Server', b'ebay-proxy-server'), (b'x-ebay-pop-id', b'UFES2-SLCAZ01-api'), (b'Content-Length', b'539'), (b'Expires', b'Tue, 03 Jun 2025 12:33:21 GMT'), (b'Cache-Control', b'max-age=0, no-cache, no-store'), (b'Pragma', b'no-cache'), (b'Date', b'Tue, 03 Jun 2025 12:33:21 GMT'), (b'Connection', b'keep-alive'), (b'x-CDN', b'Akamai'), (b'Strict-Transport-Security', b'max-age=31536000')])
2025-06-03 13:33:21,475 - httpx - INFO - HTTP Request: GET https://api.ebay.com/commerce/taxonomy/v1/category_tree/3/get_category_suggestions?q=trainers "HTTP/1.1 200 OK"
2025-06-03 13:33:21,475 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-03 13:33:21,476 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-03 13:33:21,476 - httpcore.http11 - DEBUG - response_closed.started
2025-06-03 13:33:21,476 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-03 13:33:21,477 - ebay_mcp.taxonomy.server - DEBUG - get_category_suggestions: Response status: 200
2025-06-03 13:33:21,477 - ebay_mcp.taxonomy.server - INFO - get_category_suggestions: Successfully fetched category suggestions.
2025-06-03 13:33:21,478 - ebay_mcp.taxonomy.server - INFO - Parsed category suggestions: 10 suggestions found
2025-06-03 13:33:21,478 - httpcore.connection - DEBUG - close.started
2025-06-03 13:33:21,479 - httpcore.connection - DEBUG - close.complete
2025-06-03 13:33:21,481 - mcp.server.lowlevel.server - DEBUG - Response sent
