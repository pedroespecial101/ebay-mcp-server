2025-06-03 13:39:41,310 - __main__ - INFO - Logging configured with level DEBUG (DEBUG)
2025-06-03 13:39:41,310 - __main__ - INFO - Log file location: /Users/petetreadaway/Projects/ebay-mcp-server/logs/fastmcp_server.log
2025-06-03 13:39:41,550 - ebay_service - INFO - Attempting to load .env from: /Users/petetreadaway/Projects/ebay-mcp-server/src/../.env
2025-06-03 13:39:41,551 - ebay_service - INFO - .env file loaded successfully.
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Auth API'
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,555 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Browse API'
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,561 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Taxonomy API'
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,567 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay Inventory API'
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,575 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,575 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Test Tools API'
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,579 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,584 - mcp.server.lowlevel.server - DEBUG - Initializing server 'Database Tools API'
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,585 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Initializing server 'eBay API'
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-06-03 13:39:41,588 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-06-03 13:39:41,588 - __main__ - INFO - Mounting all sub-servers
2025-06-03 13:39:41,588 - __main__ - INFO - Mounted auth MCP server
2025-06-03 13:39:41,588 - __main__ - INFO - Mounted browse API MCP server
2025-06-03 13:39:41,588 - __main__ - INFO - Mounted taxonomy API MCP server
2025-06-03 13:39:41,588 - __main__ - INFO - Mounted inventory API MCP server
2025-06-03 13:39:41,588 - __main__ - INFO - Mounted tests MCP server
2025-06-03 13:39:41,588 - __main__ - INFO - Mounted database MCP server
2025-06-03 13:39:41,588 - __main__ - INFO - All sub-servers mounted successfully
2025-06-03 13:39:41,588 - __main__ - INFO - Starting FastMCP server with stdio transport...
2025-06-03 13:39:41,588 - __main__ - INFO - Server is configured with dynamically mounted sub-servers
2025-06-03 13:39:41,588 - FastMCP.fastmcp.server.server - INFO - Starting server "eBay API"...
2025-06-03 13:39:41,592 - asyncio - DEBUG - Using selector: KqueueSelector
2025-06-03 13:39:41,595 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2025-06-03 13:39:41,595 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x1068d6c10>
2025-06-03 13:39:41,595 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-06-03 13:39:41,595 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-06-03 13:39:41,595 - ebay_mcp.auth.server - INFO - Executing trigger_ebay_login MCP tool.
2025-06-03 13:39:41,596 - root - INFO - Initiating eBay user login process...
2025-06-03 13:39:41,596 - root - INFO - Generated scope string: 'https://api.ebay.com/oauth/api_scope https://api.ebay.com/oauth/api_scope/sell.inventory https://api.ebay.com/oauth/api_scope/commerce.identity.readonly'
2025-06-03 13:39:41,596 - root - INFO - Opening browser to: https://auth.ebay.com/oauth2/authorize with query params...
2025-06-03 13:39:41,779 - root - INFO - Waiting for authorization response from local server...
2025-06-03 13:39:41,780 - root - INFO - Local HTTP server started on port 9292, listening on all available interfaces (reuse_address enabled).
2025-06-03 13:39:41,780 - root - INFO - Waiting for eBay to redirect to your configured RuName (which should forward to a local address on port 9292 at path /oauth/callback)...
2025-06-03 13:39:49,124 - root - INFO - Authorization code received by local server: v^1.1#i^1#...
2025-06-03 13:39:49,124 - root - INFO - Shutting down local HTTP server...
2025-06-03 13:39:49,125 - root - INFO - Local HTTP server stopped.
2025-06-03 13:39:49,125 - root - INFO - Exchanging authorization code for token: v^1.1#i^1#...
2025-06-03 13:39:49,138 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.ebay.com:443
2025-06-03 13:39:49,556 - urllib3.connectionpool - DEBUG - https://api.ebay.com:443 "POST /identity/v1/oauth2/token HTTP/1.1" 200 2713
2025-06-03 13:39:49,558 - root - INFO - Access token received: v^1.1#i^1#...
2025-06-03 13:39:49,558 - root - INFO - Refresh token received: v^1.1#i^1#...
2025-06-03 13:39:49,558 - root - INFO - Attempting to fetch eBay user details...
2025-06-03 13:39:49,558 - root - INFO - Using access token for user details: v^1.1#i^1#...
2025-06-03 13:39:49,560 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): apiz.ebay.com:443
2025-06-03 13:39:49,902 - urllib3.connectionpool - DEBUG - https://apiz.ebay.com:443 "GET /commerce/identity/v1/user/ HTTP/1.1" 200 115
2025-06-03 13:39:49,903 - root - INFO - Fetched user details: UserID=9h3xD5OhS9y, UserName=treadersloft
2025-06-03 13:39:49,905 - root - INFO - Successfully fetched tokens and user details: UserID=9h3xD5OhS9y, UserName=treadersloft, AccessToken=v^1.1#i^1#..., RefreshToken=v^1.1#i^1#...
2025-06-03 13:39:49,911 - root - INFO - set_key reported SUCCESS for EBAY_USER_ACCESS_TOKEN. Value (truncated): v^1.1#i^1#f^0#p...
2025-06-03 13:39:49,913 - root - INFO - set_key reported SUCCESS for EBAY_USER_ID. Value (truncated): 9h3xD5OhS9y...
2025-06-03 13:39:49,915 - root - INFO - set_key reported SUCCESS for EBAY_USER_NAME. Value (truncated): treadersloft...
2025-06-03 13:39:49,916 - root - INFO - set_key reported SUCCESS for EBAY_USER_REFRESH_TOKEN. Value (truncated): v^1.1#i^1#r^1#p...
2025-06-03 13:39:49,919 - root - INFO - All user credentials saved to .env successfully.
2025-06-03 13:39:49,921 - root - INFO - Successfully obtained tokens and user details: Tokens and user details obtained.
2025-06-03 13:39:49,921 - ebay_mcp.auth.server - INFO - trigger_ebay_login: eBay login process completed successfully according to initiate_user_login.
2025-06-03 13:39:49,922 - mcp.server.lowlevel.server - DEBUG - Response sent
